<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="pt-PT"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;Análise de Andebol ao Vivo&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Bibliotecas para ler e escrever ficheiros XLSX (Excel) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Bibliotecas para gerar PDF --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"&gt;&lt;/script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>-webkit-tap-highlight-color: transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.btn-feedback:active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transform: scale(0.95);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>opacity: 0.8;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>input[type=number]::-webkit-inner-spin-button,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>input[type=number]::-webkit-outer-spin-button {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>-webkit-appearance: none;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>input[type=number] {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>-moz-appearance: textfield;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.shot-type-btn.selected, .shot-zone-btn.selected {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #4f46e5; /* indigo-600 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-color: #6366f1; /* indigo-500 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.toggled-on, .passive-active, .opponent-7v6-active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.toggled-on {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">             </span>background-color: #16a34a; /* green-600 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.passive-active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #dc2626; /* red-600 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.passive-active:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #b91c1c; /* red-700 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.opponent-7v6-active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #ea580c; /* orange-600 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.opponent-7v6-active:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #c2410c; /* orange-700 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.tab-btn.active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #60a5fa; /* blue-400 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-color: #3b82f6; /* blue-600 */</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.timeline-tooltip {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>visibility: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 180px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background-color: #1f2937;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #fff;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 6px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 5px 8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: absolute;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>z-index: 10;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>bottom: 125%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>left: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-left: -90px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>opacity: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>transition: opacity 0.3s;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>pointer-events: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.timeline-event:hover .timeline-tooltip {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>visibility: visible;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>opacity: 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.court-stats-text {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 12px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-weight: bold;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>fill: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-anchor: middle;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body class="bg-gray-900 text-white antialiased"&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Ecrã de Carregamento Inicial --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="welcomeModal" class="fixed inset-0 bg-gray-900 flex items-center justify-center z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-8 w-full max-w-md text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h2 class="text-3xl font-bold text-blue-400 mb-4"&gt;Preparar Jogo&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-gray-400 mb-8"&gt;Carregue o ficheiro do jogo (.xlsx) e indique o nome do adversário.&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="space-y-6 mb-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;!-- Carregar Ficheiro do Jogo --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;input type="file" id="welcome-file-input-A" class="hidden" accept=".xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;label for="welcome-file-input-A" class="cursor-pointer w-full block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>Carregar Ficheiro do Jogo (.xlsx)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p id="file-name-A" class="text-sm text-gray-500 mt-2 h-5"&gt;Nenhum ficheiro selecionado&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;!-- Nome da Equipa B --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;input type="text" id="welcome-team-b-name" placeholder="Nome da Equipa Adversária" class="w-full bg-gray-700 text-white text-center text-lg font-semibold p-3 rounded-lg border-2 border-gray-600 focus:border-orange-500 focus:outline-none"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="startGameBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>Começar Jogo</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="main-app" class="container mx-auto p-4 md:p-6 lg:p-8 hidden"&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- Nomes das Equipas --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 mb-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="text" id="teamAName" value="Academia de Andebol SPS" readonly class="w-full bg-gray-800 text-white text-center text-xl font-semibold p-3 rounded-lg border-2 border-gray-700 focus:outline-none"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;input type="text" id="teamBName" placeholder="Nome da Equipa B" class="w-full bg-gray-800 text-white text-center text-xl font-semibold p-3 rounded-lg border-2 border-gray-700 focus:border-orange-500 focus:outline-none"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- Painel de Estatísticas ao Vivo --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg mb-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h2 class="text-2xl font-bold text-center mb-4 text-gray-300"&gt;Estatísticas ao Vivo&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex justify-around items-center text-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex-1"&gt;&lt;p id="statsTeamAName" class="text-lg font-semibold text-blue-400"&gt;Equipa A&lt;/p&gt;&lt;p id="scoreA" class="text-5xl font-bold"&gt;0&lt;/p&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="text-4xl font-light text-gray-500 mx-4"&gt;-&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex-1"&gt;&lt;p id="statsTeamBName" class="text-lg font-semibold text-orange-400"&gt;Equipa B&lt;/p&gt;&lt;p id="scoreB" class="text-5xl font-bold"&gt;0&lt;/p&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4 text-center text-sm md:text-base"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;p class="font-semibold text-gray-400"&gt;Efic. Ataque&lt;/p&gt;&lt;p&gt;&lt;span id="effA" class="text-blue-400 font-medium"&gt;0%&lt;/span&gt; vs &lt;span id="effB" class="text-orange-400 font-medium"&gt;0%&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;p class="font-semibold text-gray-400"&gt;Total Remates&lt;/p&gt;&lt;p&gt;&lt;span id="shotsA" class="text-blue-400 font-medium"&gt;0&lt;/span&gt; vs &lt;span id="shotsB" class="text-orange-400 font-medium"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div&gt;&lt;p class="font-semibold text-gray-400"&gt;Defesas GR&lt;/p&gt;&lt;p&gt;&lt;span id="savesA" class="text-blue-400 font-medium"&gt;0&lt;/span&gt; vs &lt;span id="savesB" class="text-orange-400 font-medium"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- Blocos de Tempo e Situação --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Cronómetro --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg text-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-center items-center gap-4 mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-2xl font-bold text-gray-300"&gt;Tempo de Jogo&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex items-center gap-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span id="gamePartDisplay" class="font-semibold bg-gray-700 px-3 py-1 rounded-md text-sm"&gt;1ª Parte&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="switchPartBtn" class="btn-feedback bg-blue-600 hover:bg-blue-700 rounded-full w-8 h-8 flex items-center justify-center transition-transform active:scale-90" title="Mudar Parte"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"&gt;&lt;/path&gt;&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="timer" class="text-6xl font-mono tracking-widest mb-4"&gt;00:00&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="timeout-timer-display" class="hidden mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p id="timeout-title" class="text-lg font-semibold"&gt;Time-out&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;p id="timeout-timer" class="text-4xl font-mono"&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-center gap-4 mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="startBtn" class="btn-feedback bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled&gt;Iniciar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="pauseBtn" class="btn-feedback bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200"&gt;Pausar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="openCorrectionModalBtn" class="btn-feedback bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200 hidden"&gt;Corrigir Tempo&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="border-t border-gray-700 pt-4 mt-4 flex justify-around gap-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="timeoutBtnA" data-team="A" class="btn-feedback bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg w-full"&gt;Time-out (&lt;span id="timeout-count-A"&gt;3&lt;/span&gt;)&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="timeoutBtnB" data-team="B" class="btn-feedback bg-orange-600 hover:bg-orange-700 text-white font-semibold py-2 px-4 rounded-lg w-full"&gt;Time-out (&lt;span id="timeout-count-B"&gt;3&lt;/span&gt;)&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Situação de Jogo --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg text-center flex flex-col justify-between"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h2 class="text-2xl font-bold text-gray-300 mb-4"&gt;Situação de Jogo&lt;/h2&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="passivePlayBtn" class="btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg w-full"&gt;Jogo Passivo&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="opponent7v6Btn" class="btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg w-full"&gt;Adversário 7x6&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="border-t border-gray-700 pt-4 mt-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h3 class="text-lg font-semibold text-gray-400 mb-3"&gt;Ações do Adversário&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="grid grid-cols-2 gap-3"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="opponentTechFaultBtn" class="btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-3 rounded-lg text-sm"&gt;Falha Técnica&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button id="opponentOfficialSanctionBtn" class="btn-feedback bg-red-800 hover:bg-red-700 text-white font-bold py-2 px-3 rounded-lg text-sm"&gt;Sanção Oficial&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- Abas de Navegação --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="mb-4 border-b border-gray-700"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;nav class="flex -mb-px" id="tabs-container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-tab="data-collection" class="tab-btn active whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm"&gt;Recolha de Dados&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-tab="team-stats" class="tab-btn whitespace-nowrap py-4 px-6 border-b-2 border-transparent font-medium text-sm text-gray-400 hover:text-white hover:border-gray-300"&gt;Estatísticas de Equipa&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-tab="individual-stats" class="tab-btn whitespace-nowrap py-4 px-6 border-b-2 border-transparent font-medium text-sm text-gray-400 hover:text-white hover:border-gray-300"&gt;Estatísticas Individuais&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-tab="timeline" class="tab-btn whitespace-nowrap py-4 px-6 border-b-2 border-transparent font-medium text-sm text-gray-400 hover:text-white hover:border-gray-300"&gt;Time Line&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-tab="export" class="tab-btn whitespace-nowrap py-4 px-6 border-b-2 border-transparent font-medium text-sm text-gray-400 hover:text-white hover:border-gray-300"&gt;Exportar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/nav&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;!-- Conteúdo das Abas --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div id="tab-content"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Aba de Recolha de Dados --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="data-collection" class="tab-panel"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg mb-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-between items-center mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center gap-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h3 class="text-xl font-semibold text-blue-400"&gt;Plantel&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="game-situation-display" class="text-sm font-semibold text-gray-400"&gt;(Igualdade)&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center gap-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="team-suspension-display" class="text-sm font-mono text-red-500"&gt;&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="opponent-team-suspension-display" class="text-sm font-mono text-green-500"&gt;&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="player-count-A" class="text-sm font-semibold bg-gray-700 px-3 py-1 rounded-md text-red-400"&gt;0/7&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-semibold text-gray-400 mb-2 border-b border-gray-700 pb-1"&gt;Guarda-Redes&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="goalkeeper-list-A" class="space-y-2"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-semibold text-gray-400 mb-2 border-b border-gray-700 pb-1"&gt;Jogadores de Campo&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="player-list-A" class="space-y-2"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;h4 class="font-semibold text-gray-400 mb-2 border-b border-gray-700 pb-1 mt-4"&gt;Oficiais&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div id="officials-list-A" class="space-y-2"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Aba de Estatísticas de Equipa --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="team-stats" class="tab-panel hidden bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="team-stats-content" class="space-y-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- JS will populate this content --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="mt-8 pt-4 border-t border-gray-700"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;div class="mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;label for="team-situation-select" class="block text-sm font-medium text-gray-300 mb-2"&gt;Filtrar por Situação de Jogo:&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;select id="team-situation-select" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;option value="all"&gt;Todos&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;option value="equality"&gt;Igualdade&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;option value="superiority"&gt;Superioridade&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;option value="inferiority"&gt;Inferioridade&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;option value="seven_vs_six"&gt;7x6&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;option value="passive"&gt;Passivo&lt;/option&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;div class="w-full max-w-2xl mx-auto aspect-video"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;svg id="team-handball-court-svg" viewBox="0 0 400 250" class="w-full h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;rect width="400" height="250" fill="#1f2937"&gt;&lt;/rect&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- Goal --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;rect x="185" y="240" width="30" height="10" fill="none" stroke="white" stroke-width="1"&gt;&lt;/rect&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- 6m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;path d="M 140 240 A 60 60 0 0 1 260 240" fill="none" stroke="white" stroke-width="1"&gt;&lt;/path&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="140" y1="240" x2="140" y2="180" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="260" y1="240" x2="260" y2="180" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- 9m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;path d="M 110 240 A 90 90 0 0 1 290 240" fill="none" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/path&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="110" y1="240" x2="110" y2="150" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="290" y1="240" x2="290" y2="150" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- 7m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="195" y1="170" x2="205" y2="170" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- Center line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="200" y1="250" x2="200" y2="0" stroke="white" stroke-width="0.5" stroke-dasharray="2"&gt;&lt;/line&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- Stats text placeholders --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-1-stats" x="65" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-2-stats" x="145" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-3-stats" x="200" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-4-stats" x="255" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-5-stats" x="335" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-6-stats" x="130" y="120" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-7-stats" x="200" y="120" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;text id="team-zone-8-stats" x="270" y="120" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Aba de Estatísticas Individuais --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="individual-stats" class="tab-panel hidden bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;h3 class="text-xl font-semibold text-blue-400 mb-4"&gt;Estatísticas Individuais de Remate&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;div class="mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;label for="player-stats-select" class="block text-sm font-medium text-gray-300 mb-2"&gt;Selecionar Jogador:&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;select id="player-stats-select" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- Options will be populated by JS --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/select&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;div class="w-full max-w-2xl mx-auto aspect-video"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;svg id="handball-court-svg" viewBox="0 0 400 250" class="w-full h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;rect width="400" height="250" fill="#1f2937"&gt;&lt;/rect&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- Goal --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;rect x="185" y="240" width="30" height="10" fill="none" stroke="white" stroke-width="1"&gt;&lt;/rect&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- 6m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;path d="M 140 240 A 60 60 0 0 1 260 240" fill="none" stroke="white" stroke-width="1"&gt;&lt;/path&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;line x1="140" y1="240" x2="140" y2="180" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;line x1="260" y1="240" x2="260" y2="180" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- 9m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;path d="M 110 240 A 90 90 0 0 1 290 240" fill="none" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/path&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;line x1="110" y1="240" x2="110" y2="150" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;line x1="290" y1="240" x2="290" y2="150" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- 7m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;line x1="195" y1="170" x2="205" y2="170" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- Center line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;line x1="200" y1="250" x2="200" y2="0" stroke="white" stroke-width="0.5" stroke-dasharray="2"&gt;&lt;/line&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- Stats text placeholders --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-1-stats" x="65" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-2-stats" x="145" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-3-stats" x="200" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-4-stats" x="255" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-5-stats" x="335" y="210" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-6-stats" x="130" y="120" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-7-stats" x="200" y="120" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;text id="zone-8-stats" x="270" y="120" class="court-stats-text"&gt;0% (0)&lt;/text&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;div class="mt-8 pt-4 border-t border-gray-700"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;h4 class="text-lg font-semibold text-gray-300 mb-4 text-center"&gt;Heat Map de Remates&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="w-full max-w-2xl mx-auto aspect-video relative"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- Base court for reference --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;svg viewBox="0 0 400 250" class="w-full h-full absolute top-0 left-0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;rect width="400" height="250" fill="transparent"&gt;&lt;/rect&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                             </span>&lt;!-- Goal --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;rect x="185" y="240" width="30" height="10" fill="none" stroke="white" stroke-width="1"&gt;&lt;/rect&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- 6m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;path d="M 140 240 A 60 60 0 0 1 260 240" fill="none" stroke="white" stroke-width="1"&gt;&lt;/path&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="140" y1="240" x2="140" y2="180" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="260" y1="240" x2="260" y2="180" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- 9m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;path d="M 110 240 A 90 90 0 0 1 290 240" fill="none" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/path&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="110" y1="240" x2="110" y2="150" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="290" y1="240" x2="290" y2="150" stroke="white" stroke-width="1" stroke-dasharray="4"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- 7m line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="195" y1="170" x2="205" y2="170" stroke="white" stroke-width="1"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- Center line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;line x1="200" y1="250" x2="200" y2="0" stroke="white" stroke-width="0.5" stroke-dasharray="2"&gt;&lt;/line&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- Heatmap overlay --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;svg id="individual-heatmap-svg" viewBox="0 0 400 250" class="w-full h-full absolute top-0 left-0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;!-- Heatmap zones will be populated by JS --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/svg&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Aba de Time Line --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="timeline" class="tab-panel hidden bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-xl font-semibold text-blue-400 mb-8 text-center"&gt;Time Line do Jogo&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="relative w-full h-32 px-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- Container para as barras de situação --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div id="timeline-situation-bars" class="absolute top-0 left-0 w-full h-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- JS irá preencher isto --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- Eventos para a Equipa A (acima) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div id="timeline-events-A" class="absolute bottom-1/2 w-full h-1/2 mb-1 flex items-end z-10"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- JS irá preencher isto --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- Linha Central com Marcadores --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div class="absolute top-1/2 left-0 w-full h-0.5 bg-gray-500"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div id="timeline-markers" class="absolute top-1/2 left-0 w-full z-10"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- JS irá preencher os marcadores de tempo --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;!-- Eventos para a Equipa B (abaixo) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;div id="timeline-events-B" class="absolute top-1/2 w-full h-1/2 mt-1 flex items-start z-10"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;!-- JS irá preencher isto --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;!-- Aba de Exportação --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="export" class="tab-panel hidden bg-gray-800 p-4 md:p-6 rounded-2xl shadow-lg"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h3 class="text-xl font-semibold text-blue-400 mb-6 text-center"&gt;Exportar Dados do Jogo&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="flex flex-col md:flex-row justify-center items-center gap-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="exportExcelBtn" class="btn-feedback bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg w-full md:w-auto"&gt;Exportar para Excel (.xlsx)&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button id="exportPdfBtn" class="btn-feedback bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg w-full md:w-auto"&gt;Exportar para PDF (.pdf)&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modais --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="alertModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;&lt;div class="bg-gray-800 rounded-lg p-6 w-full max-w-sm text-center shadow-2xl"&gt;&lt;p id="alertText" class="text-lg mb-6"&gt;&lt;/p&gt;&lt;button id="alertOk" class="btn-feedback bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-12 rounded-lg"&gt;OK&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="confirmModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;&lt;div class="bg-gray-800 rounded-lg p-6 w-full max-w-sm text-center shadow-2xl"&gt;&lt;p id="modalText" class="text-lg mb-6"&gt;&lt;/p&gt;&lt;div class="flex justify-center gap-4"&gt;&lt;button id="confirmYes" class="btn-feedback bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-8 rounded-lg"&gt;Sim&lt;/button&gt;&lt;button id="confirmNo" class="btn-feedback bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-8 rounded-lg"&gt;Não&lt;/button&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modal de Remate (Genérico) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="shotModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-6 w-full max-w-2xl text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3 id="shotModalTitle" class="text-xl font-bold text-blue-400 mb-2"&gt;&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="shotPlayerName" class="text-lg font-semibold mb-4"&gt;&lt;/p&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="shot-types-container-wrapper" class="mb-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h4 class="font-semibold text-gray-400 mb-3"&gt;1. Tipo de Remate&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="shot-types-container" class="grid grid-cols-3 sm:grid-cols-5 gap-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;Ponta&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;Pivot&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;Penetração&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;6mt&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;9mt&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;7mt&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;1ª Vaga&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;2ª Vaga&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;3ª Vaga&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;Após Golo&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="shot-type-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition col-span-3 sm:col-span-5"&gt;Baliza Aberta&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="shot-zone-container" class="mb-4 hidden"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h4 class="font-semibold text-gray-400 mb-3"&gt;2. Zona de Remate&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="grid grid-cols-4 sm:grid-cols-8 gap-2 max-w-md mx-auto"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="1" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;1&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="2" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;2&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="3" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;3&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="4" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;4&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="5" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;5&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="6" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;6&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="7" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;7&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-zone="8" class="shot-zone-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-3 rounded-lg transition"&gt;8&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;h4 id="shot-outcome-title" class="font-semibold text-gray-400 mb-3"&gt;2. Resultado do Remate&lt;/h4&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div id="shot-outcome-container" class="grid grid-cols-2 gap-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-outcome="goal" class="shot-outcome-btn btn-feedback bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled&gt;Golo&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-outcome="saved" class="shot-outcome-btn btn-feedback bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled&gt;Defesa&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-outcome="miss" class="shot-outcome-btn btn-feedback bg-red-800 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled&gt;Fora&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button data-outcome="post" class="shot-outcome-btn btn-feedback bg-yellow-700 hover:bg-yellow-800 text-white font-bold py-3 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled&gt;Poste&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="closeShotModalBtn" class="mt-6 text-gray-400 hover:text-white"&gt;Cancelar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modal de Ação Negativa --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="negativeActionModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-bold text-yellow-400 mb-2"&gt;Registar Ação Negativa&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="negativeActionPlayerName" class="text-lg font-semibold mb-6"&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="grid grid-cols-2 gap-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-negative-action="technical_fault" class="negative-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;Falha Técnica&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-negative-action="turnover" class="negative-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;Perda de Bola&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-negative-action="7m_foul" class="negative-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;7m Provocado&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-negative-action="sanction" class="negative-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;Sanções&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-negative-action="2min_7m_foul" class="negative-action-btn btn-feedback bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg col-span-2"&gt;2min + 7m&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="closeNegativeActionModalBtn" class="mt-6 text-gray-400 hover:text-white"&gt;Cancelar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modal de Ação Positiva --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="positiveActionModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-6 w-full max-w-lg text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-bold text-green-400 mb-2"&gt;Registar Ação Positiva&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="positiveActionPlayerName" class="text-lg font-semibold mb-6"&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="grid grid-cols-2 gap-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-positive-action="steal" class="positive-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;Roubo de Bola&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-positive-action="2min_provoked" class="positive-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;2min Provocado&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-positive-action="7m_provoked" class="positive-action-btn btn-feedback bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg"&gt;7m Provocado&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button data-positive-action="2min_7m_provoked" class="positive-action-btn btn-feedback bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-4 rounded-lg col-span-2"&gt;2min + 7m Provocado&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="closePositiveActionModalBtn" class="mt-6 text-gray-400 hover:text-white"&gt;Cancelar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modal de Sanções --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="sanctionsModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-6 w-full max-w-md text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-bold text-red-500 mb-2"&gt;Registar Sanção&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p id="sanctionPlayerName" class="text-lg font-semibold mb-6"&gt;&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex justify-center gap-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="sanctionYellow" class="sanction-btn btn-feedback w-1/3 bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-3 px-4 rounded-lg"&gt;Amarelo&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="sanction2Min" class="sanction-btn btn-feedback w-1/3 bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg"&gt;2 Min&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button id="sanctionRed" class="sanction-btn btn-feedback w-1/3 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg"&gt;Vermelho&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="closeSanctionsModalBtn" class="mt-6 text-gray-400 hover:text-white"&gt;Cancelar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modal de Correção de Tempo --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="correctionModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-6 w-full max-w-sm text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-bold text-indigo-400 mb-4"&gt;Corrigir Tempo&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex justify-center items-center gap-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="number" id="correctMinutes" min="0" max="99" placeholder="MM" class="w-24 bg-gray-700 text-white text-center p-2 rounded-lg border border-gray-600 focus:outline-none focus:border-indigo-500"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;span class="font-bold text-gray-500 text-2xl"&gt;:&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="number" id="correctSeconds" min="0" max="59" placeholder="SS" class="w-24 bg-gray-700 text-white text-center p-2 rounded-lg border border-gray-600 focus:outline-none focus:border-indigo-500"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="flex justify-center gap-4 mt-6"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;button id="setTimerBtn" class="btn-feedback bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-8 rounded-lg"&gt;Aplicar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                 </span>&lt;button id="closeCorrectionModalBtn" class="btn-feedback bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-8 rounded-lg"&gt;Cancelar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;!-- Modal para Remover Jogador (Sanção do Banco) --&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div id="removePlayerModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50 p-4"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="bg-gray-800 rounded-2xl p-6 w-full max-w-md text-center shadow-2xl"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-bold text-red-500 mb-4"&gt;Sanção de Banco&lt;/h3&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p class="text-gray-300 mb-6"&gt;Selecione um jogador em campo para retirar durante 2 minutos.&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div id="remove-player-list" class="space-y-2 max-h-64 overflow-y-auto"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="closeRemovePlayerModalBtn" class="mt-6 text-gray-400 hover:text-white"&gt;Cancelar&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let gameData = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>A: { stats: { goals: 0, misses: 0, savedShots: 0, turnovers: 0, gkSaves: 0, gkGoalsAgainst: 0 }, players: [], officials: [], fileLoaded: false, teamYellowCards: 0, isTeamSuspended: false, teamSuspensionTimer: 0, timeouts: { total: 3, part1: 0, part2: 0, taken: [] }, officialsSanctions: { yellow: 0, twoMin: 0, red: 0 } },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>B: { stats: { goals: 0, misses: 0, savedShots: 0, turnovers: 0, technical_faults: 0, transition_goals: 0, gkSaves: 0, gkGoalsAgainst: 0 }, isSuspended: false, suspensionTimer: 0, timeouts: { total: 3, part1: 0, part2: 0, taken: [] } }</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let timerInterval = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let timeoutInterval = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let totalSeconds = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const FIRST_HALF_END = 1800, SECOND_HALF_END = 3600;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let isTimerRunning = false, currentGamePart = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let currentPersonForAction = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let selectedShotType = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let selectedShotZone = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let isGkShot = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let actionAfterPlayerRemoval = null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let isPassivePlay = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let gameEvents = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let gameSituationLog = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let lastKnownSituations = { A: 'equality', B: 'equality' };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let isOpponent7v6 = false;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// DOM Elements</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const welcomeModal = document.getElementById('welcomeModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const mainApp = document.getElementById('main-app');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const startGameBtn = document.getElementById('startGameBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timerDisplay = document.getElementById('timer');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const startBtn = document.getElementById('startBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const pauseBtn = document.getElementById('pauseBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const gamePartDisplay = document.getElementById('gamePartDisplay');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const playerCountADisplay = document.getElementById('player-count-A');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const teamSuspensionDisplay = document.getElementById('team-suspension-display');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const opponentTeamSuspensionDisplay = document.getElementById('opponent-team-suspension-display');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openCorrectionModalBtn = document.getElementById('openCorrectionModalBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timeoutBtnA = document.getElementById('timeoutBtnA');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timeoutBtnB = document.getElementById('timeoutBtnB');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timeoutTimerDisplay = document.getElementById('timeout-timer-display');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timeoutTimer = document.getElementById('timeout-timer');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const timeoutTitle = document.getElementById('timeout-title');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const gameSituationDisplay = document.getElementById('game-situation-display');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const opponentOfficialSanctionBtn = document.getElementById('opponentOfficialSanctionBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const passivePlayBtn = document.getElementById('passivePlayBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const opponent7v6Btn = document.getElementById('opponent7v6Btn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const opponentTechFaultBtn = document.getElementById('opponentTechFaultBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const exportExcelBtn = document.getElementById('exportExcelBtn');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const exportPdfBtn = document.getElementById('exportPdfBtn');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Modals</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const alertModal = document.getElementById('alertModal'), alertText = document.getElementById('alertText'), alertOkBtn = document.getElementById('alertOk');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const confirmModal = document.getElementById('confirmModal'), modalText = document.getElementById('modalText'), confirmYesBtn = document.getElementById('confirmYes'), confirmNoBtn = document.getElementById('confirmNo');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const shotModal = document.getElementById('shotModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const negativeActionModal = document.getElementById('negativeActionModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const positiveActionModal = document.getElementById('positiveActionModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const sanctionsModal = document.getElementById('sanctionsModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const correctionModal = document.getElementById('correctionModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const removePlayerModal = document.getElementById('removePlayerModal');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let confirmCallback = null;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- ALL FUNCTION DEFINITIONS ---</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Timeline and Situation Logic ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const logEvent = (team, type, player, time, details) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameEvents.push({ team, type, player, time, details });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const getSituationA = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const onCourtA = gameData.A.players.filter(p =&gt; p.onCourt).length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const isGkOnCourtA = gameData.A.players.some(p =&gt; p.onCourt &amp;&amp; p.isGoalkeeper);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const onCourtB = isOpponent7v6 ? 7 : (gameData.B.isSuspended ? 6 : 7);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (onCourtA === 7 &amp;&amp; !isGkOnCourtA) return 'seven_vs_six';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (onCourtA &gt; onCourtB) return 'superiority';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (onCourtA &lt; onCourtB) return 'inferiority';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return 'equality';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const getSituationB = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const onCourtA = gameData.A.players.filter(p =&gt; p.onCourt).length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const onCourtB = isOpponent7v6 ? 7 : (gameData.B.isSuspended ? 6 : 7);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (isOpponent7v6) return 'seven_vs_six';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (onCourtB &gt; onCourtA) return 'superiority';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (onCourtB &lt; onCourtA) return 'inferiority';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>return 'equality';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const checkAndLogSituationChange = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const currentSituationA = getSituationA();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const currentSituationB = getSituationB();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (currentSituationA !== lastKnownSituations.A || currentSituationB !== lastKnownSituations.B) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const lastLog = gameSituationLog.length &gt; 0 ? gameSituationLog[gameSituationLog.length - 1] : null;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (lastLog &amp;&amp; lastLog.endTime === null) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>lastLog.endTime = totalSeconds;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameSituationLog.push({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>startTime: totalSeconds,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>endTime: null,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>situationA: currentSituationA,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>situationB: currentSituationB</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>lastKnownSituations.A = currentSituationA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>lastKnownSituations.B = currentSituationB;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const renderSituationBars = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const container = document.getElementById('timeline-situation-bars');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!container) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>container.innerHTML = '';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const situationColors = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>superiority: 'bg-green-500',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>inferiority: 'bg-red-500',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>seven_vs_six: 'bg-blue-500',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>equality: 'bg-yellow-500'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameSituationLog.length === 0) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameSituationLog.forEach(log =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const startTime = log.startTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const endTime = log.endTime === null ? totalSeconds : log.endTime;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const duration = endTime - startTime;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (duration &lt;= 0) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const left = (startTime / 3600) * 100;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const width = (duration / 3600) * 100;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const barA = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>barA.className = `absolute bottom-1/2 h-3 ${situationColors[log.situationA]} opacity-75`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>barA.style.left = `${left}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>barA.style.width = `${width}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>container.appendChild(barA);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const barB = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>barB.className = `absolute top-1/2 h-3 ${situationColors[log.situationB]} opacity-75`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>barB.style.left = `${left}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>barB.style.width = `${width}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>container.appendChild(barB);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const renderTimeline = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const containerA = document.getElementById('timeline-events-A');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const containerB = document.getElementById('timeline-events-B');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const markersContainer = document.getElementById('timeline-markers');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!containerA || !containerB || !markersContainer) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>containerA.innerHTML = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>containerB.innerHTML = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>markersContainer.innerHTML = '';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 0; i &lt;= 60; i += 5) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const markerWrapper = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markerWrapper.className = 'flex flex-col items-center';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markerWrapper.style.position = 'absolute';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markerWrapper.style.left = `${(i / 60) * 100}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markerWrapper.style.transform = 'translateX(-50%)';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const line = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>line.className = 'h-2 w-0.5 bg-gray-500';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const label = document.createElement('span');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>label.className = 'text-xs text-gray-400 mt-1';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>label.textContent = i;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markerWrapper.appendChild(line);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markerWrapper.appendChild(label);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>markersContainer.appendChild(markerWrapper);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const iconMap = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>goal: '⚽️',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>save: '🧤',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>miss: '🥅',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>yellow_card: '🟨',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>two_min: '⏱️',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>red_card: '🟥'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameEvents.forEach(event =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const eventEl = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>eventEl.className = 'timeline-event absolute transform -translate-x-1/2';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const leftPosition = (event.time / 3600) * 100;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>eventEl.style.left = `${leftPosition}%`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const icon = iconMap[event.type] || '❓';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const timeFormatted = formatTimeValue(event.time);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const tooltipText = `${timeFormatted} - ${event.details || event.type}`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>eventEl.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;span class="text-xl cursor-pointer"&gt;${icon}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="timeline-tooltip"&gt;${tooltipText}&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>`;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (event.team === 'A') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>containerA.appendChild(eventEl);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>containerB.appendChild(eventEl);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderSituationBars();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Modal Functions ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const showAlert = (message) =&gt; { alertText.textContent = message; alertModal.classList.remove('hidden'); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const showConfirm = (message, callback) =&gt; { modalText.textContent = message; confirmCallback = callback; confirmModal.classList.remove('hidden'); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const hideConfirm = () =&gt; { confirmModal.classList.add('hidden'); confirmCallback = null; };</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Timer Functions ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const formatTimeValue = (timeInSeconds) =&gt; `${Math.floor(timeInSeconds / 60).toString().padStart(2, '0')}:${(timeInSeconds % 60).toString().padStart(2, '0')}`;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateSituationButtonsState = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameData.B.isSuspended) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponent7v6Btn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponent7v6Btn.classList.add('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (isOpponent7v6) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>isOpponent7v6 = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>opponent7v6Btn.classList.remove('opponent-7v6-active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>opponent7v6Btn.classList.add('bg-gray-700', 'hover:bg-gray-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponent7v6Btn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponent7v6Btn.classList.remove('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateSuspensionTimers = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let needsRender = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let situationChanged = false;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.A.players.forEach(p =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (p.isSuspended &amp;&amp; p.suspensionTimer &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.suspensionTimer--;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (p.suspensionTimer === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>p.isSuspended = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>situationChanged = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>needsRender = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameData.A.isTeamSuspended &amp;&amp; gameData.A.teamSuspensionTimer &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.A.teamSuspensionTimer--;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (gameData.A.teamSuspensionTimer === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.A.isTeamSuspended = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>situationChanged = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>needsRender = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameData.B.isSuspended &amp;&amp; gameData.B.suspensionTimer &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.B.suspensionTimer--;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (gameData.B.suspensionTimer === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.B.isSuspended = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>situationChanged = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>updateSituationButtonsState();<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>needsRender = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (needsRender) renderPlayers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (situationChanged) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updatePlayersTimeOnCourt = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!isTimerRunning) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.A.players.forEach(player =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player.onCourt) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>player.timeOnCourt++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const timeEl = document.getElementById(`player-time-A-${player.Numero}`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (timeEl) timeEl.textContent = formatTimeValue(player.timeOnCourt);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const startTimer = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!isTimerRunning &amp;&amp; totalSeconds &lt; SECOND_HALF_END) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>isTimerRunning = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.classList.add('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>openCorrectionModalBtn.classList.add('hidden');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timerInterval = setInterval(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>totalSeconds++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>timerDisplay.textContent = formatTimeValue(totalSeconds);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>updatePlayersTimeOnCourt();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>updateSuspensionTimers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderTimeline();</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (totalSeconds === FIRST_HALF_END &amp;&amp; currentGamePart === 1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>pauseTimer();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>showAlert('Fim da Primeira Parte');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>currentGamePart = 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>gamePartDisplay.textContent = '2ª Parte';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>} else if (totalSeconds &gt;= SECOND_HALF_END) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>totalSeconds = SECOND_HALF_END;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>timerDisplay.textContent = formatTimeValue(totalSeconds);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>pauseTimer();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>showAlert('Fim de Jogo');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>startBtn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>startBtn.classList.add('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}, 1000);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.textContent = 'Continuar';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const pauseTimer = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isTimerRunning = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>clearInterval(timerInterval);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (totalSeconds &lt; SECOND_HALF_END) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.classList.remove('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>openCorrectionModalBtn.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openCorrectionModal = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const currentMinutes = Math.floor(totalSeconds / 60);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const currentSeconds = totalSeconds % 60;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('correctMinutes').value = currentMinutes;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('correctSeconds').value = currentSeconds;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>correctionModal.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const closeCorrectionModal = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>correctionModal.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Player Management</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateGameSituationDisplay = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const situationTextMap = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>superiority: '(Superioridade)',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>inferiority: '(Inferioridade)',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>seven_vs_six: '(7x6)',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>equality: '(Igualdade)'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const situationColorMap = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>superiority: 'text-green-400',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>inferiority: 'text-red-500',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>seven_vs_six: 'text-blue-400',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>equality: 'text-gray-400'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const currentSituationA = getSituationA();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameSituationDisplay.textContent = situationTextMap[currentSituationA] || '(Igualdade)';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameSituationDisplay.className = `text-sm font-semibold ${situationColorMap[currentSituationA]}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updatePlayerCountAndCheckStart = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const onCourtPlayersA = gameData.A.players.filter(p =&gt; p.onCourt).length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>playerCountADisplay.textContent = `${onCourtPlayersA}/7`;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (totalSeconds === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (onCourtPlayersA === 7) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.remove('text-red-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.add('text-green-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>startBtn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>startBtn.classList.remove('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.remove('text-green-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.add('text-red-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>startBtn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>startBtn.classList.add('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>const expectedPlayers = (gameData.A.isTeamSuspended || gameData.A.players.some(p =&gt; p.isSuspended)) ? 6 : 7;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>if(onCourtPlayersA &lt;= expectedPlayers) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.remove('text-red-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.add('text-green-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.remove('text-green-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerCountADisplay.classList.add('text-red-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                     </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const renderPlayers = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalkeeperList = document.getElementById('goalkeeper-list-A');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const playerList = document.getElementById('player-list-A');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>goalkeeperList.innerHTML = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>playerList.innerHTML = '';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameData.A.isTeamSuspended) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>teamSuspensionDisplay.textContent = `(Equipa c/ -1: ${formatTimeValue(gameData.A.teamSuspensionTimer)})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>teamSuspensionDisplay.textContent = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameData.B.isSuspended) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponentTeamSuspensionDisplay.textContent = `(Adv. c/ -1: ${formatTimeValue(gameData.B.suspensionTimer)})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponentTeamSuspensionDisplay.textContent = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const createPlayerElement = (player) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerDiv = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>playerDiv.className = `flex items-center justify-between p-2 rounded-lg ${player.onCourt ? 'bg-green-900' : 'bg-gray-700'}`;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>let actionButtonHTML = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player.isGoalkeeper) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>actionButtonHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button data-player-number="${player.Numero}" class="gk-shoot-btn btn-feedback text-xs font-bold py-1 px-1 rounded-full bg-blue-500 text-white ${player.onCourt ? '' : 'hidden'}"&gt;Remate&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button data-player-number="${player.Numero}" class="gk-shot-btn btn-feedback text-xs font-bold py-1 px-1 rounded-full bg-red-500 text-white ${player.onCourt ? '' : 'hidden'}"&gt;Rem. Sofrido&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>actionButtonHTML = `&lt;button data-player-number="${player.Numero}" class="shot-btn btn-feedback text-xs font-bold py-1 px-2 rounded-full bg-blue-500 text-white ${player.onCourt ? '' : 'hidden'}"&gt;Remate&lt;/button&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>let sanctionDisplay = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player.sanctions.red &gt; 0) sanctionDisplay = '🟥';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else if (player.isSuspended) sanctionDisplay = `&lt;span class="font-mono text-orange-400"&gt;${formatTimeValue(player.suspensionTimer)}&lt;/span&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else if (player.sanctions.yellow &gt; 0) sanctionDisplay = '🟨';</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const isBlocked = player.isSuspended || player.sanctions.red &gt; 0;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>playerDiv.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center gap-2"&gt;&lt;span class="font-bold text-gray-400 w-8"&gt;${player.Numero}&lt;/span&gt;&lt;span class="font-medium"&gt;${player.Nome}&lt;/span&gt;&lt;span class="w-12 text-center"&gt;${sanctionDisplay}&lt;/span&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center gap-1"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span id="player-time-A-${player.Numero}" class="font-mono text-sm text-gray-300"&gt;${formatTimeValue(player.timeOnCourt)}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>${actionButtonHTML}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button data-player-number="${player.Numero}" class="positive-action-btn btn-feedback text-xs font-bold py-1 px-1 rounded-full bg-teal-500 text-white ${player.onCourt ? '' : 'hidden'}"&gt;Ação Pos.&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button data-player-number="${player.Numero}" class="negative-action-btn btn-feedback text-xs font-bold py-1 px-1 rounded-full bg-yellow-500 text-black ${player.onCourt ? '' : 'hidden'}"&gt;Ação Neg.&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;button data-player-number="${player.Numero}" class="toggle-status-btn btn-feedback text-xs font-bold py-1 px-2 rounded-full ${player.onCourt ? 'bg-gray-200 text-black' : 'bg-green-500 text-white'} ${isBlocked ? 'opacity-50 cursor-not-allowed' : ''}" ${isBlocked ? 'disabled' : ''}&gt;${player.onCourt ? 'Banco' : 'Campo'}&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return playerDiv;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.A.players.forEach(player =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player.isGoalkeeper) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>goalkeeperList.appendChild(createPlayerElement(player));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>playerList.appendChild(createPlayerElement(player));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updatePlayerCountAndCheckStart();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateGameSituationDisplay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const renderOfficials = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const officialsContainer = document.getElementById('officials-list-A');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>officialsContainer.innerHTML = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.A.officials.forEach(official =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const officialDiv = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>officialDiv.className = 'flex items-center justify-between p-2 rounded-lg bg-gray-700';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>let sanctionDisplay = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (official.sanctions.red &gt; 0) sanctionDisplay = '🟥';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else if (official.sanctions.twoMin &gt; 0) sanctionDisplay = '&lt;span class="text-orange-400"&gt;2\'&lt;/span&gt;';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>else if (official.sanctions.yellow &gt; 0) sanctionDisplay = '🟨';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>officialDiv.innerHTML = `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="flex items-center gap-2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="font-bold text-gray-400 w-8"&gt;${official.Posicao}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="font-medium"&gt;${official.Nome}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="w-8 text-center"&gt;${sanctionDisplay}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;button data-official-name="${official.Nome}" class="official-sanction-btn btn-feedback text-xs font-bold py-1 px-2 rounded-full bg-red-500 text-white"&gt;Sanção&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>officialsContainer.appendChild(officialDiv);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// File Handling and Initial Setup</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const checkStartConditions = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamBName = document.getElementById('welcome-team-b-name').value.trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>startGameBtn.disabled = !(gameData.A.fileLoaded &amp;&amp; teamBName !== '');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const handleFileSelect = (evt) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const file = evt.target.files[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!file) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('file-name-A').textContent = file.name;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const reader = new FileReader();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>reader.onload = (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const data = new Uint8Array(e.target.result);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const workbook = XLSX.read(data, { type: 'array' });</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const athletesSheetName = workbook.SheetNames[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const athletesWorksheet = workbook.Sheets[athletesSheetName];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const athletesJson = XLSX.utils.sheet_to_json(athletesWorksheet);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.A.players = athletesJson</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>.filter(p =&gt; p.Numero &amp;&amp; p.Nome &amp;&amp; p.Posicao)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>.map(p =&gt; ({ ...p, onCourt: false, timeOnCourt: 0, shots: [], shotsFaced: [], negativeActions: [], positiveActions: [], sanctions: { yellow: 0, twoMin: 0, red: 0 }, isSuspended: false, suspensionTimer: 0, isGoalkeeper: p.Posicao.trim().toUpperCase() === 'GR' }));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (workbook.SheetNames.length &gt; 1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const officialsSheetName = workbook.SheetNames[1];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const officialsWorksheet = workbook.Sheets[officialsSheetName];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.A.officials = XLSX.utils.sheet_to_json(officialsWorksheet)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>.filter(o =&gt; o.Nome &amp;&amp; o.Posicao)</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>.map(o =&gt; ({...o, sanctions: { yellow: 0, twoMin: 0, red: 0 } }));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.A.fileLoaded = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>checkStartConditions();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>reader.readAsArrayBuffer(file);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const deactivatePassivePlay = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (isPassivePlay) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>isPassivePlay = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>passivePlayBtn.classList.remove('passive-active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>passivePlayBtn.classList.add('bg-gray-700', 'hover:bg-gray-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const deactivateOpponent7v6 = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (isOpponent7v6) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>isOpponent7v6 = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponent7v6Btn.classList.remove('opponent-7v6-active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponent7v6Btn.classList.add('bg-gray-700', 'hover:bg-gray-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Modals Logic</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const shotZoneRules = { 'Ponta': [1, 5], 'Pivot': [2, 3, 4], 'Penetração': [2, 3, 4], '6mt': [2, 3, 4], '9mt': [6, 7, 8], '7mt': [], '1ª Vaga': [1, 2, 3, 4, 5, 6, 7, 8], '2ª Vaga': [1, 2, 3, 4, 5, 6, 7, 8], '3ª Vaga': [1, 2, 3, 4, 5, 6, 7, 8], 'Após Golo': [1, 2, 3, 4, 5, 6, 7, 8], 'Baliza Aberta': [] };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openShotModal = (player, mode) =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>currentPersonForAction = player;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('shotPlayerName').textContent = `#${player.Numero} ${player.Nome}`;<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if(mode === 'gk_shoot') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>isGkShot = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById('shotModalTitle').textContent = 'Remate (Baliza Aberta)';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById('shot-types-container-wrapper').classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById('shot-zone-container').classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById('shot-outcome-title').textContent = 'Resultado do Remate';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.querySelectorAll('.shot-outcome-btn').forEach(b =&gt; b.disabled = false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>selectedShotType = 'Baliza Aberta';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>isGkShot = (mode === 'gk_faced');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById('shotModalTitle').textContent = isGkShot ? 'Registar Remate Sofrido' : 'Registar Remate';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.getElementById('shot-types-container-wrapper').classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>shotModal.classList.remove('hidden');<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const closeShotModal = () =&gt; { shotModal.classList.add('hidden'); currentPersonForAction = null; selectedShotType = null; selectedShotZone = null; isGkShot = false; document.querySelectorAll('.shot-type-btn.selected, .shot-zone-btn.selected').forEach(btn =&gt; btn.classList.remove('selected')); document.querySelectorAll('.shot-outcome-btn').forEach(btn =&gt; btn.disabled = true); document.getElementById('shot-zone-container').classList.add('hidden'); };</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openNegativeActionModal = (player) =&gt; { currentPersonForAction = player; document.getElementById('negativeActionPlayerName').textContent = `#${player.Numero} ${player.Nome}`; negativeActionModal.classList.remove('hidden'); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const closeNegativeActionModal = () =&gt; { negativeActionModal.classList.add('hidden'); currentPersonForAction = null; };</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openPositiveActionModal = (player) =&gt; { currentPersonForAction = player; document.getElementById('positiveActionPlayerName').textContent = `#${player.Numero} ${player.Nome}`; const stealButton = document.querySelector('#positiveActionModal [data-positive-action="steal"]'); const sevenMeterButton = document.querySelector('#positiveActionModal [data-positive-action="7m_provoked"]'); const twoMinSevenMeterButton = document.querySelector('#positiveActionModal [data-positive-action="2min_7m_provoked"]'); if (player.isGoalkeeper) { stealButton.style.display = 'none'; sevenMeterButton.style.display = 'none'; twoMinSevenMeterButton.style.display = 'none'; } else { stealButton.style.display = 'block'; sevenMeterButton.style.display = 'block'; twoMinSevenMeterButton.style.display = 'block'; } positiveActionModal.classList.remove('hidden'); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const closePositiveActionModal = () =&gt; { positiveActionModal.classList.add('hidden'); currentPersonForAction = null; document.querySelector('#positiveActionModal [data-positive-action="steal"]').style.display = 'block'; document.querySelector('#positiveActionModal [data-positive-action="7m_provoked"]').style.display = 'block'; document.querySelector('#positiveActionModal [data-positive-action="2min_7m_provoked"]').style.display = 'block'; };</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const triggerTeamSuspension = (callback) =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const onCourtPlayers = gameData.A.players.filter(p =&gt; p.onCourt);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (onCourtPlayers.length &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>openRemovePlayerModal(onCourtPlayers, () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.A.isTeamSuspended = true;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.A.teamSuspensionTimer = 120;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if(callback) callback();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.A.isTeamSuspended = true;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.A.teamSuspensionTimer = 120;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if(callback) callback();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openSanctionsModal = (person, type) =&gt; { currentPersonForAction = {person, type}; document.getElementById('sanctionPlayerName').textContent = `${person.Nome}`; if(type === 'player'){ document.getElementById('sanctionYellow').disabled = person.sanctions.yellow &gt; 0 || gameData.A.teamYellowCards &gt;= 3; document.getElementById('sanction2Min').disabled = person.sanctions.twoMin &gt;= 3 || person.sanctions.red &gt; 0; document.getElementById('sanctionRed').disabled = person.sanctions.red &gt; 0; } else { document.getElementById('sanctionYellow').disabled = gameData.A.officialsSanctions.yellow &gt; 0; document.getElementById('sanction2Min').disabled = gameData.A.officialsSanctions.twoMin &gt; 0 || gameData.A.officialsSanctions.red &gt; 0; document.getElementById('sanctionRed').disabled = gameData.A.officialsSanctions.red &gt; 0; } sanctionsModal.classList.remove('hidden'); };</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const closeSanctionsModal = () =&gt; { sanctionsModal.classList.add('hidden'); currentPersonForAction = null; };</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const openRemovePlayerModal = (players, callback) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const listContainer = document.getElementById('remove-player-list');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>listContainer.innerHTML = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>players.forEach(p =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const btn = document.createElement('button');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>btn.className = 'w-full text-left p-2 bg-gray-700 hover:bg-gray-600 rounded-lg';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>btn.textContent = `#${p.Numero} ${p.Nome}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>btn.onclick = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.onCourt = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if(callback) callback();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>closeRemovePlayerModal();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderPlayers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>listContainer.appendChild(btn);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>actionAfterPlayerRemoval = callback;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>removePlayerModal.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const closeRemovePlayerModal = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>removePlayerModal.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// UI Update Functions</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateUI = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const statsA = gameData.A.stats, statsB = gameData.B.stats;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('scoreA').textContent = statsA.goals;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('scoreB').textContent = statsB.goals;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const totalShotsA = statsA.goals + statsA.misses + statsA.savedShots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const totalShotsB = statsB.goals + statsB.misses + statsB.savedShots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('shotsA').textContent = totalShotsA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('shotsB').textContent = totalShotsB;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const techFaultsA = gameData.A.players.reduce((acc, p) =&gt; acc + p.negativeActions.filter(a =&gt; a.action === 'technical_fault').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const attacksA = totalShotsA + gameData.A.stats.turnovers + techFaultsA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const attacksB = totalShotsB + gameData.B.stats.turnovers + gameData.B.stats.technical_faults;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('effA').textContent = `${attacksA &gt; 0 ? ((statsA.goals / attacksA) * 100).toFixed(1) : '0.0'}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('effB').textContent = `${attacksB &gt; 0 ? ((statsB.goals / attacksB) * 100).toFixed(1) : '0.0'}%`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('savesA').textContent = statsA.gkSaves;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('savesB').textContent = statsB.gkSaves;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamAName = document.getElementById('teamAName').value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamBName = document.getElementById('teamBName').value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('statsTeamAName').textContent = teamAName;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('statsTeamBName').textContent = teamBName;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (gameData.B.isSuspended) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponentTeamSuspensionDisplay.textContent = `(Adv. c/ -1: ${formatTimeValue(gameData.B.suspensionTimer)})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>opponentTeamSuspensionDisplay.textContent = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTeamStats();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Timeout Logic</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const handleTimeout = (team) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamTimeouts = gameData[team].timeouts;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (teamTimeouts.total &lt;= 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>showAlert('Não tem mais time-outs disponíveis.');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (currentGamePart === 1 &amp;&amp; teamTimeouts.part1 &gt;= 2) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>showAlert('Só pode pedir 2 time-outs na primeira parte.');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (currentGamePart === 2 &amp;&amp; teamTimeouts.part2 &gt;= 2) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>showAlert('Só pode pedir 2 time-outs na segunda parte.');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (currentGamePart === 2 &amp;&amp; totalSeconds &gt;= (25 * 60) &amp;&amp; teamTimeouts.part2 &gt;= 1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>showAlert('Só pode pedir 1 time-out nos últimos 5 minutos.');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pauseTimer();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>teamTimeouts.total--;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (currentGamePart === 1) teamTimeouts.part1++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>else teamTimeouts.part2++;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>teamTimeouts.taken.push(totalSeconds);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById(`timeout-count-${team}`).textContent = teamTimeouts.total;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let timeoutSeconds = 57;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutTimerDisplay.classList.remove('hidden');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutTitle.classList.remove('text-blue-400', 'text-orange-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutTimer.classList.remove('text-blue-400', 'text-orange-400');</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (team === 'A') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeoutTitle.classList.add('text-blue-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeoutTimer.classList.add('text-blue-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeoutTitle.classList.add('text-orange-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeoutTimer.classList.add('text-orange-400');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutTimer.textContent = formatTimeValue(timeoutSeconds);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>startBtn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pauseBtn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>openCorrectionModalBtn.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutBtnA.disabled = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutBtnB.disabled = true;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>timeoutInterval = setInterval(() =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeoutSeconds--;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timeoutTimer.textContent = formatTimeValue(timeoutSeconds);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (timeoutSeconds &lt;= 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>clearInterval(timeoutInterval);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>timeoutTimerDisplay.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>startBtn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>pauseBtn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>openCorrectionModalBtn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>timeoutBtnA.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>timeoutBtnB.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}, 1000);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Team Stats Logic ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const renderTeamStats = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const container = document.getElementById('team-stats-content');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!container) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const createStatRow = (label, valueA, barPercentA, valueB, barPercentB, isPercentage = true) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const valueADisplay = isPercentage ? `${barPercentA.toFixed(1)}%` : valueA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const valueBDisplay = isPercentage ? `${barPercentB.toFixed(1)}%` : valueB;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return `</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;div class="grid grid-cols-[1fr_3fr_2fr_3fr_1fr] items-center gap-x-3 text-center"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="font-semibold text-blue-400 text-sm md:text-base"&gt;${valueADisplay}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="bg-gray-700 rounded-full h-4 w-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="bg-blue-500 h-4 rounded-full" style="width: ${barPercentA}%;"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="font-semibold text-gray-300 text-xs md:text-sm"&gt;${label}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="bg-gray-700 rounded-full h-4 w-full"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="bg-orange-500 h-4 rounded-full" style="width: ${barPercentB}%;"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;span class="font-semibold text-orange-400 text-sm md:text-base"&gt;${valueBDisplay}&lt;/span&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsA = gameData.A.stats.goals;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const totalShotsA = goalsA + gameData.A.stats.misses + gameData.A.stats.savedShots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const techFaultsA = gameData.A.players.reduce((acc, p) =&gt; acc + p.negativeActions.filter(a =&gt; a.action === 'technical_fault').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const attacksA = totalShotsA + gameData.A.stats.turnovers + techFaultsA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const effOfensivaA = attacksA &gt; 0 ? (goalsA / attacksA) * 100 : 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const shotsFacedA = gameData.A.stats.gkSaves + gameData.A.stats.gkGoalsAgainst;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const effGKA = shotsFacedA &gt; 0 ? (gameData.A.stats.gkSaves / shotsFacedA) * 100 : 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsEqualityA = gameData.A.players.reduce((acc, p) =&gt; acc + p.shots.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationA === 'equality').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsInferiorityA = gameData.A.players.reduce((acc, p) =&gt; acc + p.shots.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationA === 'inferiority').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsSuperiorityA = gameData.A.players.reduce((acc, p) =&gt; acc + p.shots.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationA === 'superiority').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goals7v6A = gameData.A.players.reduce((acc, p) =&gt; acc + p.shots.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationA === 'seven_vs_six').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsTransitionA = gameData.A.players.reduce((acc, p) =&gt; acc + p.shots.filter(s =&gt; s.outcome === 'goal' &amp;&amp; ['1ª Vaga', '2ª Vaga', '3ª Vaga', 'Após Golo'].includes(s.type)).length, 0);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsB = gameData.B.stats.goals;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const totalShotsB = goalsB + gameData.B.stats.misses + gameData.B.stats.savedShots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const techFaultsB = gameData.B.stats.technical_faults;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const attacksB = totalShotsB + gameData.B.stats.turnovers + techFaultsB;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const effOfensivaB = attacksB &gt; 0 ? (goalsB / attacksB) * 100 : 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const shotsFacedB = gameData.B.stats.gkSaves + goalsA;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const effGKB = shotsFacedB &gt; 0 ? (gameData.B.stats.gkSaves / shotsFacedB) * 100 : 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsEqualityB = gameData.A.players.reduce((acc, p) =&gt; acc + p.shotsFaced.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationB === 'equality').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsInferiorityB = gameData.A.players.reduce((acc, p) =&gt; acc + p.shotsFaced.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationB === 'inferiority').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsSuperiorityB = gameData.A.players.reduce((acc, p) =&gt; acc + p.shotsFaced.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationB === 'superiority').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goals7v6B = gameData.A.players.reduce((acc, p) =&gt; acc + p.shotsFaced.filter(s =&gt; s.outcome === 'goal' &amp;&amp; s.situationB === 'seven_vs_six').length, 0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const goalsTransitionB = gameData.A.players.reduce((acc, p) =&gt; acc + p.shotsFaced.filter(s =&gt; s.outcome === 'goal' &amp;&amp; ['1ª Vaga', '2ª Vaga', '3ª Vaga', 'Após Golo'].includes(s.type)).length, 0);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let html = '';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Golos', goalsA, totalShotsA &gt; 0 ? (goalsA / totalShotsA) * 100 : 0, goalsB, totalShotsB &gt; 0 ? (goalsB / totalShotsB) * 100 : 0, false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Eficácia Ofensiva', effOfensivaA, effOfensivaA, effOfensivaB, effOfensivaB);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Eficácia GR', effGKA, effGKA, effGKB, effGKB);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Golos em Igualdade', goalsEqualityA, goalsA &gt; 0 ? (goalsEqualityA / goalsA) * 100 : 0, goalsEqualityB, goalsB &gt; 0 ? (goalsEqualityB / goalsB) * 100 : 0, false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Golos em Inferioridade', goalsInferiorityA, goalsA &gt; 0 ? (goalsInferiorityA / goalsA) * 100 : 0, goalsInferiorityB, goalsB &gt; 0 ? (goalsInferiorityB / goalsB) * 100 : 0, false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Golos em Superioridade', goalsSuperiorityA, goalsA &gt; 0 ? (goalsSuperiorityA / goalsA) * 100 : 0, goalsSuperiorityB, goalsB &gt; 0 ? (goalsSuperiorityB / goalsB) * 100 : 0, false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Golos 7x6', goals7v6A, goalsA &gt; 0 ? (goals7v6A / goalsA) * 100 : 0, goals7v6B, goalsB &gt; 0 ? (goals7v6B / goalsB) * 100 : 0, false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Golos em Transição', goalsTransitionA, goalsA &gt; 0 ? (goalsTransitionA / goalsA) * 100 : 0, goalsTransitionB, goalsB &gt; 0 ? (goalsTransitionB / goalsB) * 100 : 0, false);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>html += createStatRow('Falhas Técnicas', techFaultsA, attacksA &gt; 0 ? (techFaultsA / attacksA) * 100 : 0, techFaultsB, attacksB &gt; 0 ? (techFaultsB / attacksB) * 100 : 0, false);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>container.innerHTML = html;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Individual Stats Logic ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const renderIndividualStats = () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const playerSelect = document.getElementById('player-stats-select');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!playerSelect) return;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const currentPlayer = playerSelect.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>playerSelect.innerHTML = '&lt;option value="all"&gt;Todos os Jogadores&lt;/option&gt;';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.A.players.forEach(player =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const option = document.createElement('option');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>option.value = player.Numero;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>option.textContent = `#${player.Numero} ${player.Nome}`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>playerSelect.appendChild(option);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>playerSelect.value = currentPlayer;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateCourtStats(playerSelect.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateHeatmapStats(playerSelect.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const handleIndividualStatChange = (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateCourtStats(e.target.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateHeatmapStats(e.target.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateCourtStats = (playerNumber) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let shotsToAnalyze = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (playerNumber === 'all') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>shotsToAnalyze = gameData.A.players.flatMap(p =&gt; p.shots);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>shotsToAnalyze = player.shots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 1; i &lt;= 8; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const zoneShots = shotsToAnalyze.filter(s =&gt; s.zone == i);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const goals = zoneShots.filter(s =&gt; s.outcome === 'goal').length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const total = zoneShots.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const efficiency = total &gt; 0 ? (goals / total) * 100 : 0;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const textElement = document.getElementById(`zone-${i}-stats`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (textElement) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>textElement.textContent = `${efficiency.toFixed(0)}% (${total})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateHeatmapStats = (playerNumber) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const heatmapSvg = document.getElementById('individual-heatmap-svg');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!heatmapSvg) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>heatmapSvg.innerHTML = '';</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let shotsToAnalyze = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (playerNumber === 'all') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>shotsToAnalyze = gameData.A.players.flatMap(p =&gt; p.shots);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>shotsToAnalyze = player.shots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const zoneCounts = {};</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 1; i &lt;= 8; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>zoneCounts[i] = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>shotsToAnalyze.forEach(shot =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (shot.zone) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>zoneCounts[shot.zone]++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const maxShots = Math.max(...Object.values(zoneCounts));</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const getColorForHeatmap = (value, maxValue) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (value === 0 || maxValue === 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>return 'rgba(0, 150, 255, 0)';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const intensity = value / maxValue;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const r = 255;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const g = Math.round(255 * (1 - intensity));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const b = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const alpha = 0.1 + intensity * 0.7;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>return `rgba(${r}, ${g}, ${b}, ${alpha})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const zoneCoordinates = {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>1: { x: 25, y: 180, width: 85, height: 60 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>2: { x: 110, y: 180, width: 60, height: 60 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>3: { x: 170, y: 180, width: 60, height: 60 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>4: { x: 230, y: 180, width: 60, height: 60 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>5: { x: 290, y: 180, width: 85, height: 60 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>6: { x: 110, y: 80, width: 60, height: 70 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>7: { x: 170, y: 80, width: 60, height: 70 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>8: { x: 230, y: 80, width: 60, height: 70 },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 1; i &lt;= 8; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const coords = zoneCoordinates[i];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rect.setAttribute('x', coords.x);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rect.setAttribute('y', coords.y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rect.setAttribute('width', coords.width);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rect.setAttribute('height', coords.height);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>rect.setAttribute('fill', getColorForHeatmap(zoneCounts[i], maxShots));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>heatmapSvg.appendChild(rect);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Team Stats Court Logic ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const updateTeamCourtStats = (situationFilter) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let allShots = gameData.A.players.flatMap(p =&gt; p.shots);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>let shotsToAnalyze = [];</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (situationFilter === 'all') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>shotsToAnalyze = allShots;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (situationFilter === 'passive') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>shotsToAnalyze = allShots.filter(s =&gt; s.passive);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>shotsToAnalyze = allShots.filter(s =&gt; s.situationA === situationFilter);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 1; i &lt;= 8; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const zoneShots = shotsToAnalyze.filter(s =&gt; s.zone == i);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const goals = zoneShots.filter(s =&gt; s.outcome === 'goal').length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const total = zoneShots.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const efficiency = total &gt; 0 ? (goals / total) * 100 : 0;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const textElement = document.getElementById(`team-zone-${i}-stats`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (textElement) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>textElement.textContent = `${efficiency.toFixed(0)}% (${total})`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>};</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// =================================================================</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// EVENT LISTENERS SETUP</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// =================================================================</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Initial Setup ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('welcome-file-input-A').addEventListener('change', handleFileSelect);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('welcome-team-b-name').addEventListener('input', checkStartConditions);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>startGameBtn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>document.getElementById('teamBName').value = document.getElementById('welcome-team-b-name').value.trim();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateUI();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>welcomeModal.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>mainApp.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameSituationLog.push({ startTime: 0, endTime: null, situationA: 'equality', situationB: 'equality' });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderPlayers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderOfficials();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Timer Controls ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>startBtn.addEventListener('click', startTimer);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>pauseBtn.addEventListener('click', pauseTimer);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('switchPartBtn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>currentGamePart = currentGamePart === 1 ? 2 : 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gamePartDisplay.textContent = `${currentGamePart}ª Parte`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>openCorrectionModalBtn.addEventListener('click', openCorrectionModal);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('closeCorrectionModalBtn').addEventListener('click', closeCorrectionModal);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('setTimerBtn').addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const minutes = parseInt(document.getElementById('correctMinutes').value, 10) || 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const seconds = parseInt(document.getElementById('correctSeconds').value, 10) || 0;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (minutes &gt;= 0 &amp;&amp; seconds &gt;= 0 &amp;&amp; seconds &lt; 60) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newTotalSeconds = (minutes * 60) + seconds;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const timeDifference = newTotalSeconds - totalSeconds;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.A.players.forEach(player =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (player.onCourt) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>player.timeOnCourt += timeDifference;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>if (player.timeOnCourt &lt; 0) player.timeOnCourt = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (player.isSuspended &amp;&amp; player.suspensionTimer &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>player.suspensionTimer -= timeDifference;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>if (player.suspensionTimer &lt;= 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>player.suspensionTimer = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>player.isSuspended = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (gameData.A.isTeamSuspended &amp;&amp; gameData.A.teamSuspensionTimer &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.A.teamSuspensionTimer -= timeDifference;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (gameData.A.teamSuspensionTimer &lt;= 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>gameData.A.teamSuspensionTimer = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>gameData.A.isTeamSuspended = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (gameData.B.isSuspended &amp;&amp; gameData.B.suspensionTimer &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>gameData.B.suspensionTimer -= timeDifference;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (gameData.B.suspensionTimer &lt;= 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>gameData.B.suspensionTimer = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>gameData.B.isSuspended = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>totalSeconds = newTotalSeconds;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>timerDisplay.textContent = formatTimeValue(totalSeconds);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.disabled = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startBtn.classList.remove('opacity-50', 'cursor-not-allowed');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>renderPlayers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>closeCorrectionModal();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Game Situation Controls ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>passivePlayBtn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isPassivePlay = !isPassivePlay;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>passivePlayBtn.classList.toggle('passive-active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>passivePlayBtn.classList.toggle('bg-gray-700');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>passivePlayBtn.classList.toggle('hover:bg-gray-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>opponent7v6Btn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isOpponent7v6 = !isOpponent7v6;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>opponent7v6Btn.classList.toggle('opponent-7v6-active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>opponent7v6Btn.classList.toggle('bg-gray-700');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>opponent7v6Btn.classList.toggle('hover:bg-gray-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderPlayers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>opponentTechFaultBtn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.B.stats.technical_faults++;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateUI();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>deactivatePassivePlay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>deactivateOpponent7v6();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>opponentOfficialSanctionBtn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>showConfirm('Registar uma sanção de 2 minutos para o adversário?', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.B.isSuspended = true;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>gameData.B.suspensionTimer = 120;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>logEvent('B', 'two_min', 'Adversário', totalSeconds, 'Sanção de 2 Minutos (Adversário)');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>updateUI();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>updateSituationButtonsState();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>deactivatePassivePlay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>deactivateOpponent7v6();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Main Click Listener for Dynamic Buttons ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.addEventListener('click', (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const target = e.target;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (target.classList.contains('toggle-status-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerNumber = target.dataset.playerNumber;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const onCourtPlayersA = gameData.A.players.filter(p =&gt; p.onCourt).length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>const isAnyPlayerSuspended = gameData.A.players.some(p =&gt; p.isSuspended);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if ((isAnyPlayerSuspended || gameData.A.isTeamSuspended) &amp;&amp; !player.onCourt) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>if (onCourtPlayersA &lt; 6) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>player.onCourt = !player.onCourt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>showAlert('Não pode colocar um jogador em campo enquanto a equipa cumpre uma sanção.');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>} else if (onCourtPlayersA &gt;= 7 &amp;&amp; !player.onCourt) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>showAlert('Só é permitido ter 7 jogadores em campo');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>return;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>player.onCourt = !player.onCourt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>checkAndLogSituationChange();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderPlayers();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderTimeline();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>deactivatePassivePlay();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>deactivateOpponent7v6();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (target.classList.contains('shot-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerNumber = target.dataset.playerNumber;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) openShotModal(player, 'field');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (target.classList.contains('gk-shot-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerNumber = target.dataset.playerNumber;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) openShotModal(player, 'gk_faced');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (target.classList.contains('gk-shoot-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerNumber = target.dataset.playerNumber;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) openShotModal(player, 'gk_shoot');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (target.classList.contains('negative-action-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerNumber = target.dataset.playerNumber;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) openNegativeActionModal(player);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (target.classList.contains('positive-action-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const playerNumber = target.dataset.playerNumber;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const player = gameData.A.players.find(p =&gt; p.Numero == playerNumber);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (player) openPositiveActionModal(player);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>} else if (target.classList.contains('official-sanction-btn')) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const officialName = target.dataset.officialName;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const official = gameData.A.officials.find(o =&gt; o.Nome == officialName);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (official) openSanctionsModal(official, 'official');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Modal Event Listeners ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>alertOkBtn.addEventListener('click', () =&gt; alertModal.classList.add('hidden'));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>confirmYesBtn.addEventListener('click', () =&gt; { if (confirmCallback) confirmCallback(); hideConfirm(); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>confirmNoBtn.addEventListener('click', hideConfirm);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('closeShotModalBtn').addEventListener('click', closeShotModal);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.shot-type-btn').forEach(btn =&gt; { btn.addEventListener('click', () =&gt; { document.querySelectorAll('.shot-type-btn.selected').forEach(b =&gt; b.classList.remove('selected')); btn.classList.add('selected'); selectedShotType = btn.textContent; const validZones = shotZoneRules[selectedShotType]; document.querySelectorAll('.shot-zone-btn').forEach(zb =&gt; zb.classList.add('hidden')); document.querySelectorAll('.shot-outcome-btn').forEach(ob =&gt; ob.disabled = true); document.querySelectorAll('.shot-zone-btn.selected').forEach(b =&gt; b.classList.remove('selected')); if (validZones.length === 0) { document.getElementById('shot-zone-container').classList.add('hidden'); document.getElementById('shot-outcome-title').textContent = '2. Resultado do Remate'; document.querySelectorAll('.shot-outcome-btn').forEach(ob =&gt; ob.disabled = false); } else { document.getElementById('shot-zone-container').classList.remove('hidden'); document.getElementById('shot-outcome-title').textContent = '3. Resultado do Remate'; validZones.forEach(zoneNum =&gt; { document.querySelector(`.shot-zone-btn[data-zone='${zoneNum}']`).classList.remove('hidden'); }); } }); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.shot-zone-btn').forEach(btn =&gt; { btn.addEventListener('click', () =&gt; { document.querySelectorAll('.shot-zone-btn.selected').forEach(b =&gt; b.classList.remove('selected')); btn.classList.add('selected'); selectedShotZone = btn.dataset.zone; document.querySelectorAll('.shot-outcome-btn').forEach(ob =&gt; ob.disabled = false); }); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.shot-outcome-btn').forEach(btn =&gt; { btn.addEventListener('click', () =&gt; { if (!selectedShotType || !currentPersonForAction) return; if (shotZoneRules[selectedShotType].length &gt; 0 &amp;&amp; !selectedShotZone) return; const outcome = btn.dataset.outcome; const situationA = getSituationA(); const situationB = getSituationB(); const shotData = { type: selectedShotType, zone: selectedShotZone, outcome: outcome, time: totalSeconds, situationA: situationA, situationB: situationB, passive: isPassivePlay }; if (isGkShot) { currentPersonForAction.shotsFaced.push(shotData); switch(outcome) { case 'goal': gameData.A.stats.gkGoalsAgainst++; gameData.B.stats.goals++; if (['1ª Vaga', '2ª Vaga', '3ª Vaga', 'Após Golo'].includes(selectedShotType)) { gameData.B.stats.transition_goals++; } logEvent('B', 'goal', 'Adversário', totalSeconds, `Golo Sofrido: ${currentPersonForAction.Nome}`); break; case 'saved': gameData.A.stats.gkSaves++; gameData.B.stats.savedShots++; logEvent('A', 'save', currentPersonForAction.Nome, totalSeconds, `Defesa de GR: ${currentPersonForAction.Nome}`); break; case 'miss': case 'post': gameData.B.stats.misses++; logEvent('B', 'miss', 'Adversário', totalSeconds, `Remate Fora/Poste (Adv)`); break; } } else { currentPersonForAction.shots.push(shotData); switch(outcome) { case 'goal': gameData.A.stats.goals++; logEvent('A', 'goal', currentPersonForAction.Nome, totalSeconds, `Golo: ${currentPersonForAction.Nome}`); break; case 'saved': gameData.A.stats.savedShots++; if (selectedShotType !== 'Baliza Aberta') { gameData.B.stats.gkSaves++; } logEvent('B', 'save', 'GR Adversário', totalSeconds, `Remate de ${currentPersonForAction.Nome} defendido`); break; case 'miss': case 'post': gameData.A.stats.misses++; logEvent('A', 'miss', currentPersonForAction.Nome, totalSeconds, `Remate Fora/Poste: ${currentPersonForAction.Nome}`); break; } } updateUI(); closeShotModal(); deactivatePassivePlay(); deactivateOpponent7v6(); }); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('closeNegativeActionModalBtn').addEventListener('click', closeNegativeActionModal);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.negative-action-btn').forEach(btn =&gt; { btn.addEventListener('click', () =&gt; { if (!currentPersonForAction) return; const action = btn.dataset.negativeAction; if (action === 'sanction') { const personToSanction = currentPersonForAction; closeNegativeActionModal(); openSanctionsModal(personToSanction, 'player'); return; } if (action === '2min_7m_foul') { if (currentPersonForAction.sanctions.twoMin &gt;= 3 || currentPersonForAction.sanctions.red &gt; 0) { showAlert('Este jogador não pode receber mais exclusões de 2 minutos.'); return; } currentPersonForAction.sanctions.twoMin++; currentPersonForAction.isSuspended = true; currentPersonForAction.suspensionTimer = 120; currentPersonForAction.onCourt = false; currentPersonForAction.negativeActions.push({ action: '2min + 7m', time: totalSeconds }); if (currentPersonForAction.sanctions.twoMin &gt;= 3) { currentPersonForAction.sanctions.red = 1; triggerTeamSuspension(); } checkAndLogSituationChange(); renderPlayers(); renderTimeline(); closeNegativeActionModal(); deactivatePassivePlay(); deactivateOpponent7v6(); return; } currentPersonForAction.negativeActions.push({ action: action, time: totalSeconds }); if (action === 'turnover') { gameData.A.stats.turnovers++; } updateUI(); closeNegativeActionModal(); deactivatePassivePlay(); deactivateOpponent7v6(); }); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('closePositiveActionModalBtn').addEventListener('click', closePositiveActionModal);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.positive-action-btn').forEach(btn =&gt; { btn.addEventListener('click', () =&gt; { if (!currentPersonForAction) return; const action = btn.dataset.positiveAction; currentPersonForAction.positiveActions.push({ action: action, time: totalSeconds }); if (action === 'steal') { gameData.B.stats.turnovers++; } if (action === '2min_provoked' || action === '2min_7m_provoked') { gameData.B.isSuspended = true; gameData.B.suspensionTimer = 120; checkAndLogSituationChange(); updateUI(); renderTimeline(); updateSituationButtonsState(); } closePositiveActionModal(); deactivatePassivePlay(); deactivateOpponent7v6(); }); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('closeSanctionsModalBtn').addEventListener('click', closeSanctionsModal);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('sanctionYellow').addEventListener('click', () =&gt; { if (!currentPersonForAction) return; const {person, type} = currentPersonForAction; person.sanctions.yellow = 1; if(type === 'player') { gameData.A.teamYellowCards++; person.negativeActions.push({ action: 'yellow_card', time: totalSeconds }); } else { gameData.A.officialsSanctions.yellow++; } logEvent('A', 'yellow_card', person.Nome, totalSeconds, `Cartão Amarelo: ${person.Nome}`); closeSanctionsModal(); renderPlayers(); renderOfficials(); deactivatePassivePlay(); deactivateOpponent7v6(); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('sanction2Min').addEventListener('click', () =&gt; { if (!currentPersonForAction) return; const {person, type} = currentPersonForAction; person.sanctions.twoMin++; if(type === 'player') { person.isSuspended = true; person.suspensionTimer = 120; person.onCourt = false; person.negativeActions.push({ action: '2min', time: totalSeconds }); if (person.sanctions.twoMin &gt;= 3) { person.sanctions.red = 1; triggerTeamSuspension(); } } else { gameData.A.officialsSanctions.twoMin++; triggerTeamSuspension(); } logEvent('A', 'two_min', person.Nome, totalSeconds, `2 Minutos: ${person.Nome}`); checkAndLogSituationChange(); closeSanctionsModal(); renderPlayers(); renderOfficials(); renderTimeline(); deactivatePassivePlay(); deactivateOpponent7v6(); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('sanctionRed').addEventListener('click', () =&gt; { if (!currentPersonForAction) return; const {person, type} = currentPersonForAction; person.sanctions.red = 1; if(type === 'player') { person.onCourt = false; person.negativeActions.push({ action: 'red_card', time: totalSeconds }); } else { gameData.A.officialsSanctions.red++; } logEvent('A', 'red_card', person.Nome, totalSeconds, `Cartão Vermelho: ${person.Nome}`); triggerTeamSuspension(); closeSanctionsModal(); renderPlayers(); renderOfficials(); deactivatePassivePlay(); deactivateOpponent7v6(); });</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('closeRemovePlayerModalBtn').addEventListener('click', closeRemovePlayerModal);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Other UI Listeners ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('teamBName').addEventListener('input', updateUI);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timeoutBtnA.addEventListener('click', () =&gt; handleTimeout('A'));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>timeoutBtnB.addEventListener('click', () =&gt; handleTimeout('B'));</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Tab Switching ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.tab-btn').forEach(tab =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>tab.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.querySelectorAll('.tab-btn').forEach(t =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>t.classList.remove('active', 'text-blue-400', 'border-blue-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>t.classList.add('text-gray-400', 'border-transparent');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>tab.classList.add('active', 'text-blue-400', 'border-blue-600');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>tab.classList.remove('text-gray-400', 'border-transparent');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const targetPanelId = tab.dataset.tab;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.querySelectorAll('.tab-panel').forEach(panel =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (panel.id === targetPanelId) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>panel.classList.remove('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>} else {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>panel.classList.add('hidden');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (targetPanelId === 'team-stats') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderTeamStats();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>updateTeamCourtStats(document.getElementById('team-situation-select').value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>} else if (targetPanelId === 'individual-stats') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>renderIndividualStats();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Stats Selects ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('player-stats-select').addEventListener('change', handleIndividualStatChange);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.getElementById('team-situation-select').addEventListener('change', (e) =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>updateTeamCourtStats(e.target.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// --- Export Buttons ---</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>exportExcelBtn.addEventListener('click', () =&gt; showAlert("Funcionalidade de exportar para Excel ainda não implementada."));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>exportPdfBtn.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const { jsPDF } = window.jspdf;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const doc = new jsPDF();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamAName = document.getElementById('teamAName').value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamBName = document.getElementById('teamBName').value;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>doc.text(`Relatório do Jogo: ${teamAName} vs ${teamBName}`, 14, 15);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>doc.text(`Resultado Final: ${gameData.A.stats.goals} - ${gameData.B.stats.goals}`, 14, 22);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Team Stats</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamStatsBody = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const teamStatsContent = document.getElementById('team-stats-content');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>teamStatsContent.querySelectorAll('.grid').forEach(row =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const cells = row.querySelectorAll('span');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>if (cells.length === 3) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>teamStatsBody.push([cells[1].textContent, cells[0].textContent, cells[2].textContent]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>doc.autoTable({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>head: [['Estatística', teamAName, teamBName]],</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>body: teamStatsBody,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startY: 30,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>headStyles: { fillColor: [41, 128, 185] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Individual Stats</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const individualStatsHead = [['Nº', 'Nome', 'Golos', 'Remates', 'Efic. (%)', 'Tempo Jogo', 'Faltas Téc.', 'Perdas Bola', 'Am.', '2m', 'Vm.']];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const individualStatsBody = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>gameData.A.players.forEach(p =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const goals = p.shots.filter(s =&gt; s.outcome === 'goal').length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const totalShots = p.shots.length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const eff = totalShots &gt; 0 ? ((goals / totalShots) * 100).toFixed(1) : '0.0';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const techFaults = p.negativeActions.filter(a =&gt; a.action === 'technical_fault').length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const turnovers = p.negativeActions.filter(a =&gt; a.action === 'turnover').length;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>individualStatsBody.push([</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.Numero,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.Nome,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>goals,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>totalShots,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>`${eff}%`,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>formatTimeValue(p.timeOnCourt),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>techFaults,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>turnovers,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.sanctions.yellow,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.sanctions.twoMin,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>p.sanctions.red</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>]);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>doc.autoTable({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>head: individualStatsHead,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>body: individualStatsBody,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startY: doc.autoTable.previous.finalY + 10,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>headStyles: { fillColor: [41, 128, 185] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Game Events</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const eventsHead = [['Tempo', 'Equipa', 'Ação', 'Detalhes']];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const eventsBody = gameEvents.map(e =&gt; [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>formatTimeValue(e.time),</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>e.team === 'A' ? teamAName : teamBName,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>e.type,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>e.details</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>]);</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>doc.autoTable({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>head: eventsHead,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>body: eventsBody,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>startY: doc.autoTable.previous.finalY + 10,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>headStyles: { fillColor: [41, 128, 185] },</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>doc.save(`Relatorio_Jogo_${teamAName}_vs_${teamBName}.pdf`);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
